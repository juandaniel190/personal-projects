<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Revenue Operations Case Study · PerkyTravel</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prop-types@15.8.1/prop-types.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/recharts@2.0.0/umd/Recharts.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.23.0/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <div id="error-msg" style="display:none; padding: 1rem; background: #fee; color: #c00; font-family: sans-serif; white-space: pre-wrap;"></div>
  <!-- Hero image: images/image.webp -->
  <script type="text/babel" data-presets="react">
    const { useState } = React;
    if (typeof Recharts === 'undefined') {
      document.getElementById('root').innerHTML = '<p style="padding:1rem;color:#c00;">Recharts failed to load. Check the browser console and try opening from a local server (e.g. npx serve).</p>';
      throw new Error('Recharts is not defined');
    }
    const { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, Cell, ScatterChart, Scatter, CartesianGrid, LabelList } = Recharts;

    // Inline SVG icons (replacing lucide-react for standalone HTML)
    const Icon = ({ size = 20, children, ...props }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>{children}</svg>
    );
    const ChevronLeft = (p) => <Icon {...p}><path d="m15 18-6-6 6-6"/></Icon>;
    const ChevronRight = (p) => <Icon {...p}><path d="m9 18 6-6-6-6"/></Icon>;
    const TrendingUp = (p) => <Icon {...p}><path d="m22 7-8.5 8.5-5-5L2 17"/><path d="M16 7h6v6"/></Icon>;
    const TrendingDown = (p) => <Icon {...p}><path d="m22 17-8.5-8.5-5 5L2 7"/><path d="M16 17h6v-6"/></Icon>;
    const AlertTriangle = (p) => <Icon {...p}><path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></Icon>;
    const Target = (p) => <Icon {...p}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></Icon>;
    const Users = (p) => <Icon {...p}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></Icon>;
    const Zap = (p) => <Icon {...p}><path d="M13 2 3 14h9l-1 8 10-12h-9l1-8z"/></Icon>;
    const Search = (p) => <Icon {...p}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></Icon>;
    const Clock = (p) => <Icon {...p}><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></Icon>;
    const BarChart3 = (p) => <Icon {...p}><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></Icon>;
    const ArrowRight = (p) => <Icon {...p}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></Icon>;

    const heroImage = 'images/image.webp';

    const COLORS = {
      bg: "#F5F5EB",
      card: "#FFFFFF",
      green: "#BEFF50",
      greenDark: "#6BBF3B",
      greenMid: "#9EDB3B",
      black: "#1A1A1A",
      gray: "#6B7280",
      grayLight: "#E0E0D8",
      red: "#E04F5F",
      blue: "#1396E4",
      orange: "#F59E0B",
      purple: "#8B5CF6",
    };

    const territoryData = [
      { name: "EMEA", aes: 13, sqlTarget: 198, sqlAchieved: 155, sqlPct: 78, pipTarget: 67.6, pipAchieved: 60.0, pipPct: 89, avgDeal: 437, fullyRamped: 69 },
      { name: "North America", aes: 35, sqlTarget: 496, sqlAchieved: 282, sqlPct: 57, pipTarget: 187.5, pipAchieved: 147.6, pipPct: 79, avgDeal: 570, fullyRamped: 46 },
      { name: "LATAM", aes: 17, sqlTarget: 283, sqlAchieved: 163, sqlPct: 58, pipTarget: 105.3, pipAchieved: 82.1, pipPct: 78, avgDeal: 558, fullyRamped: 71 },
      { name: "APAC", aes: 16, sqlTarget: 216, sqlAchieved: 93, sqlPct: 43, pipTarget: 76.6, pipAchieved: 43.2, pipPct: 56, avgDeal: 498, fullyRamped: 50 },
    ];

    const rampData = [
      { stage: "Ramping (0-3mo)", count: 17, pct: 21, pipAttain: 41.2, color: COLORS.red },
      { stage: "Early (4-6mo)", count: 18, pct: 22, pipAttain: 69.5, color: COLORS.orange },
      { stage: "Fully Ramped (7mo+)", count: 46, pct: 57, pipAttain: 89.9, color: COLORS.greenDark },
    ];

    const rampByRegionData = [
      { name: "EMEA", ramping: 2, early: 3, fullyRamped: 8, total: 13 },
      { name: "North America", ramping: 10, early: 8, fullyRamped: 17, total: 35 },
      { name: "LATAM", ramping: 3, early: 2, fullyRamped: 12, total: 17 },
      { name: "APAC", ramping: 2, early: 5, fullyRamped: 9, total: 16 },
    ];

    const gapData = [
      { name: "EMEA", sql: 78, pipeline: 89, gap: 11 },
      { name: "NA", sql: 57, pipeline: 79, gap: 22 },
      { name: "LATAM", sql: 58, pipeline: 78, gap: 20 },
      { name: "APAC", sql: 43, pipeline: 56, gap: 13 },
    ];

    const quadrantData = [
      { id: "123496", territory: "LATAM", sql: 93, pipeline: 196, tenure: 14 },
      { id: "123512", territory: "NA", sql: 63, pipeline: 149, tenure: 13 },
      { id: "123498", territory: "LATAM", sql: 63, pipeline: 141, tenure: 10 },
      { id: "123457", territory: "EMEA", sql: 93, pipeline: 136, tenure: 13 },
      { id: "123513", territory: "NA", sql: 88, pipeline: 131, tenure: 15 },
      { id: "123474", territory: "APAC", sql: 40, pipeline: 5, tenure: 7 },
      { id: "123465", territory: "EMEA", sql: 38, pipeline: 19, tenure: 7 },
      { id: "123497", territory: "LATAM", sql: 27, pipeline: 25, tenure: 8 },
      { id: "123482", territory: "APAC", sql: 50, pipeline: 43, tenure: 11 },
      { id: "123480", territory: "APAC", sql: 63, pipeline: 88, tenure: 9 },
      { id: "123525", territory: "NA", sql: 75, pipeline: 95, tenure: 12 },
      { id: "123469", territory: "APAC", sql: 33, pipeline: 72, tenure: 8 },
    ];

    const distributionData = [
      { range: "0-25%", count: 3, color: COLORS.red },
      { range: "25-50%", count: 4, color: COLORS.orange },
      { range: "50-75%", count: 7, color: "#FACC15" },
      { range: "75-100%", count: 14, color: COLORS.greenMid },
      { range: "100%+", count: 18, color: COLORS.greenDark },
    ];

    const Card = ({ children, className = "" }) => (
      <div className={`bg-white rounded-xl border border-gray-200 shadow-sm ${className}`}>{children}</div>
    );

    const KPI = ({ value, label, sub, detail, accent = false }) => (
      <div className="text-center px-2 py-2">
        <div className={`text-2xl font-bold ${accent ? "text-green-600" : "text-gray-900"}`} style={accent ? { color: COLORS.greenDark } : {}}>{value}</div>
        <div className="text-[11px] font-semibold text-gray-500 uppercase tracking-wider mt-0.5">{label}</div>
        {sub && <div className="text-[11px] text-gray-400 mt-0.5">{sub}</div>}
        {detail && <div className="text-[11px] text-gray-400 mt-1 border-t border-gray-100 pt-1">{detail}</div>}
      </div>
    );

    const FillBar = ({ label, pct, target, color, sub }) => (
      <div className="mb-2">
        <div className="flex justify-between items-baseline mb-1.5">
          <span className="font-semibold text-sm text-gray-800">{label}</span>
          <span className="text-sm font-bold" style={{ color }}>{pct}%</span>
        </div>
        <div className="w-full h-5 bg-gray-100 rounded-full overflow-hidden relative">
          <div className="h-full rounded-full transition-all duration-700" style={{ width: `${Math.min(pct, 100)}%`, backgroundColor: color }} />
          <div className="absolute right-2 top-0 h-full flex items-center text-xs text-gray-400">Target: {target}</div>
        </div>
        {sub && <div className="text-xs text-gray-400 mt-1">{sub}</div>}
      </div>
    );

    const Pill = ({ text, color = COLORS.greenDark }) => (
      <span className="inline-block text-xs font-bold px-2.5 py-1 rounded-full mr-1.5 mb-1" style={{ backgroundColor: `${color}20`, color }}>{text}</span>
    );

    const SlideNav = ({ current, total, onPrev, onNext }) => (
      <div className="flex items-center justify-center gap-4 mt-6">
        <button onClick={onPrev} disabled={current === 0} className="p-2 rounded-full hover:bg-gray-200 disabled:opacity-30 transition"><ChevronLeft size={20} /></button>
        <div className="flex gap-1.5">
          {Array.from({ length: total }).map((_, i) => (
            <div key={i} className={`h-1.5 rounded-full transition-all ${i === current ? "w-8" : "w-3"}`} style={{ backgroundColor: i === current ? COLORS.greenDark : COLORS.grayLight }} />
          ))}
        </div>
        <button onClick={onNext} disabled={current === total - 1} className="p-2 rounded-full hover:bg-gray-200 disabled:opacity-30 transition"><ChevronRight size={20} /></button>
        <span className="text-xs text-gray-400 ml-2">{current + 1}/{total}</span>
      </div>
    );

    const Slide0 = () => (
      <div className="h-full flex items-center gap-8">
        <div className="flex-1 flex flex-col justify-center">
      <span className="inline-block px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider mb-6 shadow-sm" style={{ backgroundColor: '#BEFF50', color: COLORS.black, boxShadow: `0 2px 0 ${COLORS.greenMid}` }}>
        Revenue Operations
      </span>
      <h1 className="text-3xl font-black text-gray-900 tracking-tight mb-4" style={{ fontFamily: "'Lato', sans-serif" }}>
        Sales Team Performance Analysis
      </h1>
      <p className="text-base text-gray-500 mb-1">
        Q4 Quarterly Review | PerkyTravel
      </p>
      <p className="text-sm text-gray-500 mb-1">
        · 81 AEs · 4 Territories, SQL + Pipeline Attainment
      </p>
      <p className="text-sm text-gray-400">
        Prepared by Juan Daniel Amézquita | Revenue Operations Partner
      </p>
        </div>
        <div className="flex-shrink-0 flex items-center justify-center max-w-[280px]">
          <img src={heroImage} alt="PerkyTravel app" className="w-full h-auto max-h-[420px] object-contain rounded-xl" />
        </div>
      </div>
    );

    const Slide1 = () => (
      <div>
        <h2 className="text-lg font-bold text-gray-900 leading-snug">EMEA leads all territories; APAC pipeline at 56% signals systemic underperformance</h2>
        <p className="text-xs text-gray-500 mt-0.5 mb-3">Territory attainment vs. target · 81 AEs across 4 regions · Q4</p>
        <div className="grid grid-cols-4 gap-2 mb-4">
          <KPI value="57.7%" label="Overall SQL" sub="Attainment" detail="1,178 of 2,040 SQLs" />
          <KPI value="78.7%" label="Overall Pipeline" sub="Attainment" accent />
          <KPI value="$630M" label="Pipeline" sub="Generated" detail="Target $800M" />
          <KPI value="21pp" label="SQL-Pipeline" sub="Gap" />
        </div>
        <Card className="p-3">
          {territoryData.map((t) => (
            <div key={t.name} className="mb-2 last:mb-0">
              <div className="flex gap-4">
                <div className="flex-1">
                  <FillBar label={`${t.name} — SQL`} pct={t.sqlPct} target={`${t.sqlTarget} SQLs`} color={t.sqlPct >= 70 ? COLORS.greenDark : t.sqlPct >= 50 ? COLORS.orange : COLORS.red} sub={`${t.aes} AEs · ${t.fullyRamped}% fully ramped`} />
                </div>
                <div className="flex-1">
                  <FillBar label={`${t.name} — Pipeline`} pct={t.pipPct} target={`$${t.pipTarget}M`} color={t.pipPct >= 70 ? COLORS.greenDark : t.pipPct >= 50 ? COLORS.orange : COLORS.red} />
                </div>
              </div>
            </div>
          ))}
        </Card>
      </div>
    );

    const Slide2 = () => (
      <div>
        <h2 className="text-lg font-bold text-gray-900 leading-snug">Pipeline outpaces SQL by 11-33pp — fewer leads, but larger deals compensate</h2>
        <p className="text-xs text-gray-500 mt-0.5 mb-3">The persistent gap suggests SQL targets may be structurally miscalibrated</p>
        <div className="grid grid-cols-2 gap-3 mb-3">
          <Card className="p-3">
            <h3 className="text-xs font-bold text-gray-700 mb-2">SQL vs Pipeline Gap (pp)</h3>
            <ResponsiveContainer width="100%" height={170}>
              <BarChart data={gapData} layout="vertical" barGap={4} margin={{ right: 28 }}>
                <XAxis type="number" domain={[0, 100]} tick={{ fontSize: 10 }} />
                <YAxis type="category" dataKey="name" tick={{ fontSize: 11, fontWeight: 600 }} width={50} />
                <Tooltip />
                <Bar dataKey="sql" name="SQL %" fill={COLORS.gray} radius={[0, 4, 4, 0]} barSize={12}>
                  <LabelList dataKey="sql" position="right" style={{ fontSize: 10, fill: COLORS.gray, fontWeight: 600 }} />
                </Bar>
                <Bar dataKey="pipeline" name="Pipeline %" fill={COLORS.greenDark} radius={[0, 4, 4, 0]} barSize={12}>
                  <LabelList dataKey="pipeline" position="right" style={{ fontSize: 10, fill: COLORS.gray, fontWeight: 600 }} />
                </Bar>
              </BarChart>
            </ResponsiveContainer>
            <div className="flex gap-3 mt-1 text-xs text-gray-500">
              <span className="flex items-center gap-1"><span className="w-2.5 h-2.5 rounded" style={{ backgroundColor: COLORS.gray }} /> SQL %</span>
              <span className="flex items-center gap-1"><span className="w-2.5 h-2.5 rounded" style={{ backgroundColor: COLORS.greenDark }} /> Pipeline %</span>
            </div>
          </Card>
          <Card className="p-3">
            <h3 className="text-xs font-bold text-gray-700 mb-2">Avg Deal Size by Territory ($K)</h3>
            <ResponsiveContainer width="100%" height={170}>
              <BarChart data={territoryData} margin={{ right: 36 }}>
                <XAxis dataKey="name" tick={{ fontSize: 10 }} />
                <YAxis tick={{ fontSize: 10 }} domain={[0, 700]} />
                <Tooltip formatter={(v) => `$${v}K`} />
                <Bar dataKey="avgDeal" radius={[6, 6, 0, 0]} barSize={32}>
                  {territoryData.map((_, i) => <Cell key={i} fill={[COLORS.greenDark, COLORS.greenMid, COLORS.blue, COLORS.orange][i]} />)}
                  <LabelList dataKey="avgDeal" position="top" formatter={(v) => `$${v}K`} style={{ fontSize: 10, fill: COLORS.gray, fontWeight: 600 }} />
                </Bar>
              </BarChart>
            </ResponsiveContainer>
          </Card>
        </div>
        <div className="grid grid-cols-3 gap-2">
          {[
            { icon: <Target size={14} />, title: "SQL Targets", desc: "May not reflect market reality. Only 3 of 46 fully ramped AEs exceed 100% SQL." },
            { icon: <TrendingUp size={14} />, title: "Deal Quality", desc: "LATAM/NA generate $558K-$570K avg deals vs $437K EMEA — fewer but larger." },
            { icon: <Search size={14} />, title: "Qualification", desc: "Reps self-select higher-value deals over volume — explains gap but masks risk." },
          ].map((item, i) => (
            <Card key={i} className="p-2.5">
              <div className="flex items-center gap-1.5 mb-1">
                <span style={{ color: COLORS.greenDark }}>{item.icon}</span>
                <span className="font-bold text-xs text-gray-800">{item.title}</span>
              </div>
              <p className="text-xs text-gray-600 leading-snug">{item.desc}</p>
            </Card>
          ))}
        </div>
      </div>
    );

    const Slide3 = () => (
      <div>
        <h2 className="text-lg font-bold text-gray-900 leading-snug">21% of the team is still ramping — fully ramped AEs deliver 2.2x better pipeline results</h2>
        <p className="text-xs text-gray-500 mt-0.5 mb-3">17 AEs in ramp (0-3mo) · 18 AEs early (4-6mo) · 46 AEs fully ramped (7mo+)</p>
        <div className="grid grid-cols-12 gap-3 mb-3">
          <Card className="col-span-6 p-4">
            <h3 className="text-xs font-bold text-gray-700 mb-2">Ramp Composition by Region</h3>
            <ResponsiveContainer width="100%" height={150}>
              <BarChart data={rampByRegionData} layout="vertical" margin={{ top: 4, right: 32, left: 0, bottom: 4 }}>
                <XAxis type="number" domain={[0, 40]} tick={{ fontSize: 10 }} allowDecimals={false} />
                <YAxis type="category" dataKey="name" tick={{ fontSize: 10 }} width={95} />
                <Tooltip formatter={(value, name) => [value, name === "ramping" ? "Ramping (0-3mo)" : name === "early" ? "Early (4-6mo)" : "Fully Ramped (7mo+)"]} />
                <Bar dataKey="ramping" stackId="stack" fill={COLORS.red} radius={[0, 0, 0, 0]} barSize={22}>
                  <LabelList dataKey="ramping" position="center" formatter={(v) => v || null} style={{ fontSize: 9, fill: "#fff", fontWeight: 600 }} />
                </Bar>
                <Bar dataKey="early" stackId="stack" fill={COLORS.orange} radius={[0, 0, 0, 0]} barSize={22}>
                  <LabelList dataKey="early" position="center" formatter={(v) => v || null} style={{ fontSize: 9, fill: "#fff", fontWeight: 600 }} />
                </Bar>
                <Bar dataKey="fullyRamped" stackId="stack" fill={COLORS.greenDark} radius={[0, 4, 4, 0]} barSize={22}>
                  <LabelList dataKey="fullyRamped" position="center" formatter={(v) => v || null} style={{ fontSize: 9, fill: "#fff", fontWeight: 600 }} />
                  <LabelList dataKey="total" position="right" formatter={(v) => (v != null ? `${v} AEs` : "")} style={{ fontSize: 10, fill: "#374151", fontWeight: 600 }} />
                </Bar>
              </BarChart>
            </ResponsiveContainer>
            <div className="flex gap-4 mt-2 text-xs text-gray-500">
              <span className="flex items-center gap-1"><span className="w-2.5 h-2.5 rounded" style={{ backgroundColor: COLORS.red }} /> Ramping (0-3mo)</span>
              <span className="flex items-center gap-1"><span className="w-2.5 h-2.5 rounded" style={{ backgroundColor: COLORS.orange }} /> Early (4-6mo)</span>
              <span className="flex items-center gap-1"><span className="w-2.5 h-2.5 rounded" style={{ backgroundColor: COLORS.greenDark }} /> Fully Ramped (7mo+)</span>
            </div>
          </Card>
          <Card className="col-span-6 p-3">
            <h3 className="text-xs font-bold text-gray-700 mb-2">Attainment by Ramp Stage (Average Attainment)</h3>
            <ResponsiveContainer width="100%" height={150}>
              <BarChart data={rampData} layout="vertical">
                <XAxis type="number" domain={[0, 100]} tick={{ fontSize: 10 }} unit="%" />
                <YAxis type="category" dataKey="stage" tick={{ fontSize: 10 }} width={120} />
                <Tooltip formatter={(v) => `${v}%`} />
                <Bar dataKey="pipAttain" name="Pipeline %" radius={[0, 6, 6, 0]} barSize={18}>
                  {rampData.map((d, i) => <Cell key={i} fill={d.color} />)}
                  <LabelList dataKey="pipAttain" position="right" formatter={(v) => `${v}%`} style={{ fontSize: 10, fill: COLORS.gray, fontWeight: 600 }} />
                </Bar>
              </BarChart>
            </ResponsiveContainer>
          </Card>
        </div>
        <div className="grid grid-cols-3 gap-2">
          {[
            { value: "10 of 35", label: "NA AEs Ramping", desc: "Only 46% of NA is fully ramped vs. 71% in LATAM and 69% in EMEA.", icon: <AlertTriangle size={14} />, accent: COLORS.red },
            { value: "2.2x", label: "Pipeline Multiplier", desc: "Fully ramped AEs at 89.9% pipeline vs. 41.2% for ramping — retention and ramp acceleration are highest-leverage.", icon: <Zap size={14} />, accent: COLORS.greenDark },
            { value: "r = 0.37", label: "Tenure Effect", desc: "Moderate positive correlation between tenure and pipeline. Coaching quality and territory likely play larger roles.", icon: <TrendingUp size={14} />, accent: COLORS.blue },
          ].map((item, i) => (
            <Card key={i} className="p-2.5">
              <div className="flex items-center gap-1.5 mb-0.5">
                <span style={{ color: item.accent }}>{item.icon}</span>
                <span className="text-xl font-bold" style={{ color: item.accent }}>{item.value}</span>
              </div>
              <div className="text-xs font-bold text-gray-700 mb-0.5">{item.label}</div>
              <p className="text-xs text-gray-500 leading-snug">{item.desc}</p>
            </Card>
          ))}
        </div>
      </div>
    );

    const Slide4 = () => (
      <div>
        <h2 className="text-lg font-bold text-gray-900 leading-snug">39% of fully ramped AEs hit target, but 15% are below 50% — a tail that needs intervention</h2>
        <p className="text-xs text-gray-500 mt-0.5 mb-3">Quadrant analysis and pipeline distribution for 46 fully ramped Account Executives</p>
        <div className="grid grid-cols-5 gap-3 mb-3">
          <Card className="col-span-3 p-3">
            <h3 className="text-xs font-bold text-gray-700 mb-1">SQL vs Pipeline Attainment (Fully Ramped)</h3>
            <p className="text-[10px] text-gray-500 mb-2">Each point = one AE. Color: pipeline ≥100% green, 50–99% orange, &lt;50% red.</p>
            <ResponsiveContainer width="100%" height={200}>
              <ScatterChart margin={{ top: 8, right: 16, bottom: 28, left: 8 }}>
                <CartesianGrid strokeDasharray="3 3" stroke="#eee" />
                <XAxis type="number" dataKey="sql" name="SQL %" domain={[0, 120]} tick={{ fontSize: 9 }} label={{ value: "SQL %", position: "bottom", fontSize: 10 }} />
                <YAxis type="number" dataKey="pipeline" name="Pipeline %" domain={[0, 210]} tick={{ fontSize: 9 }} label={{ value: "Pipeline %", angle: -90, position: "insideLeft", fontSize: 10 }} />
                <Tooltip content={({ payload }) => {
                  if (!payload?.[0]) return null;
                  const d = payload[0].payload;
                  return (
                    <div className="bg-white p-2 rounded shadow-lg border text-xs">
                      <div className="font-bold">{d.id} · {d.territory}</div>
                      <div>SQL: {d.sql}% · Pipeline: {d.pipeline}%</div>
                      <div>Tenure: {d.tenure}mo</div>
                    </div>
                  );
                }} />
                <Scatter data={quadrantData}>
                  {quadrantData.map((d, i) => (
                    <Cell key={i} fill={d.pipeline >= 100 ? COLORS.greenDark : d.pipeline >= 50 ? COLORS.orange : COLORS.red} />
                  ))}
                </Scatter>
              </ScatterChart>
            </ResponsiveContainer>
          </Card>
          <Card className="col-span-2 p-3">
            <h3 className="text-xs font-bold text-gray-700 mb-2">Pipeline Attainment Distribution</h3>
            <ResponsiveContainer width="100%" height={140}>
              <BarChart data={distributionData}>
                <XAxis dataKey="range" tick={{ fontSize: 9 }} />
                <YAxis tick={{ fontSize: 9 }} />
                <Tooltip />
                <Bar dataKey="count" radius={[4, 4, 0, 0]} barSize={24}>
                  {distributionData.map((d, i) => <Cell key={i} fill={d.color} />)}
                </Bar>
              </BarChart>
            </ResponsiveContainer>
            <div className="mt-2">
              <div className="text-xs font-bold text-gray-700 mb-1 uppercase tracking-wider">Top Performers</div>
              {[
                { id: "123496", t: "LATAM", pip: "196%", sql: "93%", tenure: "14mo", deal: "$698K" },
                { id: "123512", t: "NA", pip: "149%", sql: "63%", tenure: "13mo", deal: "$979K" },
                { id: "123498", t: "LATAM", pip: "141%", sql: "63%", tenure: "10mo", deal: "$743K" },
              ].map((p, i) => (
                <div key={i} className="flex items-center gap-1.5 py-1 border-b border-gray-100 last:border-0">
                  <span className="w-4 h-4 rounded-full flex items-center justify-center text-white text-[10px] font-bold" style={{ backgroundColor: COLORS.greenDark }}>{i + 1}</span>
                  <span className="text-xs font-bold text-gray-800">{p.id}</span>
                  <Pill text={p.t} />
                  <span className="text-xs text-gray-500">{p.sql} SQL</span>
                  <span className="text-xs font-bold ml-auto" style={{ color: COLORS.greenDark }}>{p.pip}</span>
                </div>
              ))}
            </div>
          </Card>
        </div>
        <Card className="p-2">
          <div className="text-xs font-bold text-gray-700 mb-1 uppercase tracking-wider flex items-center gap-1"><AlertTriangle size={12} className="text-red-500" /> At Risk — Fully Ramped Below 50%</div>
          <div className="flex flex-wrap gap-1.5">
            {[
              { id: "123474", t: "APAC", pip: "5%", tenure: "7mo" },
              { id: "123465", t: "EMEA", pip: "19%", tenure: "7mo" },
              { id: "123497", t: "LATAM", pip: "25%", tenure: "8mo" },
              { id: "123482", t: "APAC", pip: "43%", tenure: "11mo" },
            ].map((p, i) => (
              <span key={i} className="text-[11px] px-2 py-0.5 rounded-full bg-red-50 text-red-700 font-medium">{p.id} ({p.t}, {p.pip}, {p.tenure})</span>
            ))}
          </div>
        </Card>
      </div>
    );

    const hypotheses = [
      { num: 1, title: "SQL targets are miscalibrated", evidence: "57.7% SQL attainment while pipeline reaches 78.7%", validate: "Historical SQL trends, market sizing, ICP penetration analysis" },
      { num: 2, title: "APAC has structural issues beyond ramp", evidence: "Even fully ramped at only 71.3%; two reps near-zero with 6+ months", validate: "Win/loss analysis, competitive landscape, product-market fit data" },
      { num: 3, title: "Recent hiring wave dilutes aggregate metrics", evidence: "17 of 81 AEs (21%) are ramping; NA has 10 of 17", validate: "Hiring dates, planned ramp timelines, onboarding effectiveness" },
      { num: 4, title: "Top performers master large-deal strategy", evidence: "LATAM/NA avg deals $558K-$570K vs. $437K EMEA", validate: "Deal-level data, vertical breakdown, expansion vs. new logo" },
      { num: 5, title: "Bottom performers need formal intervention", evidence: "7 fully ramped AEs below 50% pipeline attainment", validate: "Manager mapping, coaching logs, PIP history, activity metrics" },
    ];

    const Slide5 = () => (
      <div className="flex gap-4 h-full">
        <div className="flex-shrink-0 flex flex-col gap-2 w-[200px]">
          <img src="images/green.jpg" alt="" className="w-full h-auto object-cover rounded-xl border border-gray-200 flex-1 min-h-0" />
          <img src="images/green2.jpg" alt="" className="w-full h-auto object-cover rounded-xl border border-gray-200 flex-1 min-h-0" />
        </div>
        <div className="flex-1 min-w-0 overflow-hidden flex flex-col">
          <h2 className="text-lg font-bold text-gray-900 leading-snug">Five hypotheses to validate — each requires specific data to confirm or rule out</h2>
          <p className="text-xs text-gray-500 mt-0.5 mb-3">Structured investigation framework to move from observation to action</p>
          <div className="space-y-2 overflow-y-auto flex-1 min-h-0 pr-1">
            {hypotheses.map((h) => (
              <Card key={h.num} className="p-3 flex gap-3 items-start">
                <div className="w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0" style={{ backgroundColor: COLORS.green, color: COLORS.black }}>{h.num}</div>
                <div className="flex-1 min-w-0">
                  <div className="font-bold text-xs text-gray-900 mb-0.5">{h.title}</div>
                  <p className="text-xs text-gray-600 mb-1 leading-snug">{h.evidence}</p>
                  <div className="flex items-center gap-1 flex-wrap">
                    <span className="text-[11px] font-bold uppercase tracking-wider" style={{ color: COLORS.greenDark }}>Validate with</span>
                    <span className="text-[11px] text-gray-500">{h.validate}</span>
                  </div>
                </div>
              </Card>
            ))}
          </div>
        </div>
      </div>
    );

    const actions = [
      { phase: "NOW", time: "0-30 Days", color: COLORS.greenDark, items: [
        { priority: "HIGH", title: "Audit SQL Targets", desc: "Conduct bottoms-up capacity model. The 21pp gap is structural, not execution." },
        { priority: "HIGH", title: "Deep-dive APAC", desc: "Product-market fit, competitive review, enablement. Individual plans for reps <50%." },
        { priority: "HIGH", title: "Performance-manage bottom 7", desc: "Structured conversations for 7 fully ramped AEs <50% pipeline. Coach, adjust, or PIP." },
      ]},
      { phase: "NEXT", time: "30-60 Days", color: COLORS.blue, items: [
        { priority: "MED", title: "Accelerate Ramp Programs", desc: "Buddy programs with top performers, territory playbooks, milestone targets." },
        { priority: "MED", title: "Build Deal Quality Metric", desc: "Pipeline/SQL, Win Rate, Avg Deal Size — composite score to normalize cross-territory comparison." },
      ]},
      { phase: "LATER", time: "60-90 Days", color: COLORS.gray, items: [
        { priority: "LOW", title: "Monitor NA Hiring Cohort", desc: "10 ramping reps is a big bet. Validate manager bandwidth, lead flow, enablement." },
      ]},
    ];

    const Slide6 = () => (
      <div>
        <h2 className="text-lg font-bold text-gray-900 leading-snug">Prioritized action plan: recalibrate, fix APAC, manage performance, accelerate ramp</h2>
        <p className="text-xs text-gray-500 mt-0.5 mb-3">Time-phased recommendations organized by expected impact</p>
        <div className="flex items-center gap-0 mb-3 justify-center">
          {actions.map((a, i) => (
            <div key={i} className="flex items-center">
              <div className="flex items-center gap-1.5 px-4 py-1.5 rounded-full text-white text-xs font-bold" style={{ backgroundColor: a.color }}>
                <span>{a.phase}</span>
                <span className="text-[11px] font-normal opacity-80">{a.time}</span>
              </div>
              {i < actions.length - 1 && <ArrowRight size={16} className="text-gray-300 mx-0.5" />}
            </div>
          ))}
        </div>
        <div className="grid grid-cols-3 gap-3">
          {actions.map((a, i) => (
            <div key={i} className="space-y-2">
              {a.items.map((item, j) => (
                <Card key={j} className="p-2.5" style={{ borderLeft: `3px solid ${a.color}` }}>
                  <div className="flex items-center gap-1.5 mb-0.5">
                    <span className="text-[11px] font-bold px-1.5 py-0.5 rounded" style={{ backgroundColor: item.priority === "HIGH" ? "#FEE2E2" : item.priority === "MED" ? "#FEF3C7" : "#F3F4F6", color: item.priority === "HIGH" ? COLORS.red : item.priority === "MED" ? "#D97706" : COLORS.gray }}>{item.priority}</span>
                    <span className="text-xs font-bold text-gray-800">{item.title}</span>
                  </div>
                  <p className="text-xs text-gray-600 leading-snug">{item.desc}</p>
                </Card>
              ))}
            </div>
          ))}
        </div>
        <Card className="mt-3 p-2.5" style={{ borderLeft: `3px solid ${COLORS.greenDark}` }}>
          <p className="text-xs text-gray-600 leading-snug"><span className="font-bold text-gray-800">Expected outcome: </span>Recalibrated targets within 30 days → APAC stabilized by Q1 → Bottom cohort resolved → Ramp time reduced 20%</p>
        </Card>
      </div>
    );

    const slideLabels = ["Home", "Territory", "Gap", "Ramp", "Individual", "Hypotheses", "Action"];
    const slides = [Slide0, Slide1, Slide2, Slide3, Slide4, Slide5, Slide6];

    function PerkCaseStudy() {
      const [current, setCurrent] = useState(0);
      const SlideComponent = slides[current];

      return (
        <div className="min-h-screen flex items-center justify-center p-4" style={{ backgroundColor: COLORS.bg, fontFamily: "'Lato', 'Inter', system-ui, sans-serif" }}>
          <div className="w-full max-w-5xl">
            <div className="flex items-center justify-between mb-4">
              <div className="flex items-center gap-3">
                <div className="w-8 h-8 rounded-lg flex items-center justify-center font-black text-sm" style={{ backgroundColor: COLORS.green, color: COLORS.black }}>P</div>
                <div>
                  <div className="text-sm font-bold text-gray-800">Revenue Operations Case Study</div>
                  <div className="text-xs text-gray-400">Perk · Sales Performance Analysis · Q4</div>
                </div>
              </div>
              <div className="flex gap-1 flex-wrap justify-end">
                {slideLabels.map((label, i) => (
                  <button key={i} onClick={() => setCurrent(i)} className={`text-xs px-2.5 py-1 rounded-full transition font-medium ${i === current ? "text-gray-900 font-bold" : "text-gray-400 hover:text-gray-600"}`} style={i === current ? { backgroundColor: `${COLORS.green}60` } : {}}>
                    {label}
                  </button>
                ))}
              </div>
            </div>

            <Card className="p-6 h-[560px] overflow-hidden">
              <SlideComponent />
            </Card>

            <SlideNav current={current} total={slides.length} onPrev={() => setCurrent(c => Math.max(0, c - 1))} onNext={() => setCurrent(c => Math.min(slides.length - 1, c + 1))} />
          </div>
        </div>
      );
    }

    try {
      const rootEl = document.getElementById('root');
      if (typeof ReactDOM.createRoot === 'function') {
        const root = ReactDOM.createRoot(rootEl);
        root.render(<PerkCaseStudy />);
      } else {
        ReactDOM.render(<PerkCaseStudy />, rootEl);
      }
    } catch (err) {
      document.getElementById('error-msg').style.display = 'block';
      document.getElementById('error-msg').textContent = err.message + '\n\n' + err.stack;
    }
  </script>
</body>
</html>
